Тут выше кто то писал про проблемы подключения embedded mongodb для тестов. Напишу, что нарыл я, может кому то поможет. На лекции этого особо не рассматривалось, но, на самом деле, все подключается просто элементарно. Сейчас это все уже автоматизировали донельзя и никаких танцев с бубном уже не требуется.
1) Нужно, чтобы в зависимостях был de.flapdoodle.embed.mongo, про который на лекции говорилось, со скопом test
2) Если настраивали подключение к монго через application.yml, то в тестовом пакете, в папке с ресурсами надо тоже создать application.yml. Иначе он подхватит основной конфигурационный файл и будет пытаться подключиться к прод базе. Я в нем указал только настройку порта spring.data.mongodb.port 0 - так он выберет для теста любой свободный порт, на котором поднимет embedded mongo
3) Создаете обычный @SpringBootTest
4) Добавляете аннотацию на класс теста @DirtiesContext(classMode = BEFORE_EACH_TEST_METHOD), чтобы он на каждый тестовый метод заново создавал контекст и базу (для чистоты эксперимента, так сказать)
5) Делаете @Autowired репозитория и MongoTemplate. Через MongoTemplate проверяете работу репозитория в тестах.
6) Все